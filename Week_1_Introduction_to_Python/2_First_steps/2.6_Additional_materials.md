# Дополнительные материалы к лекции

* [REPL — Википедия](https://ru.wikipedia.org/wiki/REPL)
* [Как запустить скрипт на `Python`](https://mkdev.me/ru/posts/kak-zapustit-skript-na-python)
* [Комментирование `Python` кода](https://dev-gang.ru/article/kommentirovanie-python-koda-auf6lgv2vv/)
* [Правильный выбор имен переменных в `Python`](https://pythonlearn.ru/python-dlya-nachinayushhix/imena-dlya-peremennyx-v-python/)

## Интерпретатор `Python`
**Интерпретатор** — это программа, которая конвертирует ваши инструкции, написанные на Python, в байт-код и выполняет их. Самая популярная реализация интерпретатора — CPython.

CPython:

* Интерпретатор компилирующего типа (благодаря этому достигается большее быстродействие выполнения программ). Это система из компилятора и интерпретатора. Компилятор переводит исходный код программы в промежуточное представление (байт-код), а интерпретатор (виртуальная машина) выполняет этот байт-код.
* Написан на C.
* Исходный код CPython находится в открытом доступе.
* Его разработка ведётся группой разработчиков под руководством Гвидо ван Россума — создателя Python.

Кроме этого, у интерпретатора CPython есть особенность — он может работать в режиме диалога (**REPL** — read-eval-print loop). Интерпретатор считывает законченную конструкцию языка, выполняет её, печатает результаты и переходит к ожиданию ввода пользователем следующей конструкции.

![pic](https://pythonchik.ru/pic/lb1/intext_630d6d5f-9f11-467b-afbb-73fc6c7f01df_original.svg)

#### Этап 1. Инициализация
После запуска вашей программы, Python-интерпретатор читает код, проверяет форматирование и синтаксис. При обнаружении ошибки он незамедлительно останавливается и показывает сообщение об ошибке. Помимо этого, происходит ряд подготовительных процессов: анализ аргументов командной строки; установка флагов программы; чтение переменных среды и т.д.

#### Этап 2. Компиляция
Интерпретатор транслирует (переводит) исходные инструкции вашей программы в байт-код (низкоуровневое, платформонезависимое представление исходного текста). Такая трансляция необходима в первую очередь для повышения скорости — байт-код выполняется в разы быстрее, чем исходные инструкции.
Если Python-интерпретатор обладает правом записи, он будет сохранять байт-код в виде файла с расширением `.pyc`. Если исходный текст программы не изменился с момента последней компиляции, при следующем запуске вашей программы, Python сразу загрузит файл `.pyc`, минуя этап компиляции (тем самым ускорит процесс запуска программы).

#### Этап 3. Выполнения
Как только байт-код скомпилирован, он отправляется на виртуальную машину Python (PVM). Здесь выполняется байт-код на PVM. Если во время этого выполнения возникает ошибка, то выполнение останавливается с сообщением об ошибке.b PVM является частью Python-интерпретатора. По сути это просто большой цикл, который выполняет перебор инструкций в байт-коде и выполняет соответствующие им операции.

## Как запустить скрипт на Python
### Интерактивный запуск кода
Такой режим интерпретатора называется **REPL** (read-eval-print loop).
```
E:\Alexander\Dropbox\Python\hello>python
Python 3.8.10 (tags/v3.8.10:3d8993a, May  3 2021, 11:48:03) [MSC v.1928 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> print('Hello, world!')
Hello, world!
>>> exit()
```
Выйти и REPL режима можно комбинациями:

* `CTRL-Z` + `enter` — для Windows;
* `CTRL-Z` или `CTRL-D` — для Linux и MacOS;
* `exit()` + `enter`.

### Запуск скриптов в командной строке
Скриптам  присваиваются расширения `.py` или `.piw`.

Создадим файл `hello.py` с таким содержанием:
```python
#!/usr/bin/env python

print('Hello, World!')
```
Запуск:
```
E:\Alexander\Dropbox\Python\hello>python hello.py
Hello, World!
```
### Переназначение устройства вывода информации
При исполнении программного кода на Python иногда необходимо сохранять результаты, которые отображает на экране программа. Они в дальнейшем анализируются для поиска ошибок или других целей. В этом случае скрипт необходимо запускать следующей командой:
```
$ python hello.py > output.txt
```
Если файла с заданным именем не существует, ОС создает его автоматически. Если существует – данные в нем перезаписываются без сохранения предыдущих. В случае, когда есть необходимость в добавлении данных в конец текстового файла, вместо одного значка `>` необходимо указать два `>>`.
```
$ python hello.py >> output.txt
```

### Запуск из командной строки без интерпретатора
В последних версиях операционной системы Windows добавлена возможность запускать скрипты на Python без ввода в командной строке названия программы-интерпретатора. То есть необходимо просто написать название файла с расширением.
```
C:\devspace> hello.py
Hello World!
```
Обусловлено это тем, что при клике на файле или запуске его из командной строки операционная система автоматически ищет связанное приложение и запускает его. Точно так же вы открываете файлы Word, просто кликнув на них курсором мыши.

В Unix таким образом тоже можно запускать скрипты. Однако для этого в первую строку текстового файла с командами необходимо добавить текст 
```
#!/Usr/bin/env python. 
```
Он указывает на программу, с помощью которой производится запуск. А интерпретатор языка программирования расценивает строку как комментарий и пропускает её.

У меня под виндой этот способ не работает. Видимо, с `.py`-файлом ассоциирован текстовый редактор кода, который и открывается.

### Запуск скриптов из интерактивного режима
Находясь в интерактивном режиме, пользователь может загрузить файл с написанной ранее последовательностью команд и запустить его на исполнение. Такой способ можно применять, когда модуль содержит вызовы функций, методов или других операторов, генерирующих текст на экране. В противном случае видимых результатов работы программы не будет.

Запустить скрипт из интерактивного режима можно командой:
```
>>> import hello
Hello, World!
```
Обратите внимание, что эта команда срабатывает один раз за интерактивный сеанс. Поэтому, если внести изменения в файл со скриптом и перезапустить его этой командой, ничего не произойдет.
